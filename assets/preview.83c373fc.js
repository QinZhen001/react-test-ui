var C=Object.defineProperty;var i=(r,n)=>C(r,"name",{value:n,configurable:!0});import{j as O,d as A,w as v,l as T,S as P,q as S}from"./iframe.0bb0f837.js";var y;function j(r,n){return n||(n=r.slice(0)),Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(n)}}))}i(j,"_taggedTemplateLiteral");function _(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}i(_,"_classCallCheck$1");function L(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}i(L,"_defineProperties$1");function N(r,n,e){return n&&L(r.prototype,n),e&&L(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}i(N,"_createClass$1");var R=i(function(){return Math.random().toString(16).slice(2)},"generateRandomId"),D=function(){function r(){var n=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.transport,a=e.async,s=a===void 0?!1:a;_(this,r),this.isAsync=void 0,this.sender=R(),this.events={},this.data={},this.transport=void 0,this.addPeerListener=O(function(o,u){n.addListener(o,u)},A(y||(y=j([`
      channel.addPeerListener is deprecated
    `])))),this.isAsync=s,t&&(this.transport=t,this.transport.setHandler(function(o){return n.handleEvent(o)}))}return i(r,"Channel"),N(r,[{key:"hasTransport",get:i(function(){return!!this.transport},"get")},{key:"addListener",value:i(function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},"addListener")},{key:"emit",value:i(function(e){for(var t=this,a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];var u={type:e,args:s,from:this.sender},c={};s.length>=1&&s[0]&&s[0].options&&(c=s[0].options);var l=i(function(){t.transport&&t.transport.send(u,c),t.handleEvent(u)},"handler");this.isAsync?setImmediate(l):l()},"emit")},{key:"last",value:i(function(e){return this.data[e]},"last")},{key:"eventNames",value:i(function(){return Object.keys(this.events)},"eventNames")},{key:"listenerCount",value:i(function(e){var t=this.listeners(e);return t?t.length:0},"listenerCount")},{key:"listeners",value:i(function(e){var t=this.events[e];return t||void 0},"listeners")},{key:"once",value:i(function(e,t){var a=this.onceListener(e,t);this.addListener(e,a)},"once")},{key:"removeAllListeners",value:i(function(e){e?this.events[e]&&delete this.events[e]:this.events={}},"removeAllListeners")},{key:"removeListener",value:i(function(e,t){var a=this.listeners(e);a&&(this.events[e]=a.filter(function(s){return s!==t}))},"removeListener")},{key:"on",value:i(function(e,t){this.addListener(e,t)},"on")},{key:"off",value:i(function(e,t){this.removeListener(e,t)},"off")},{key:"handleEvent",value:i(function(e){var t=this.listeners(e.type);t&&t.length&&t.forEach(function(a){a.apply(e,e.args)}),this.data[e.type]=e.args},"handleEvent")},{key:"onceListener",value:i(function(e,t){var a=this,s=i(function o(){return a.removeListener(e,o),t.apply(void 0,arguments)},"onceListener");return s},"onceListener")}]),r}();const I=D;function $(){var r={setHandler:i(function(){},"setHandler"),send:i(function(){},"send")};return new I({transport:r})}i($,"mockChannel");var g;(function(r){r.TAB="tab",r.PANEL="panel",r.TOOL="tool",r.TOOLEXTRA="toolextra",r.PREVIEW="preview",r.NOTES_ELEMENT="notes-element"})(g||(g={}));function w(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}i(w,"_defineProperties");function H(r,n,e){return n&&w(r.prototype,n),e&&w(r,e),Object.defineProperty(r,"prototype",{writable:!1}),r}i(H,"_createClass");function M(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}i(M,"_classCallCheck");var Y=H(i(function r(){var n=this;M(this,r),this.loaders={},this.elements={},this.config={},this.channel=void 0,this.serverChannel=void 0,this.promise=void 0,this.resolve=void 0,this.getChannel=function(){return n.channel||n.setChannel($()),n.channel},this.getServerChannel=function(){if(!n.serverChannel)throw new Error("Accessing non-existent serverChannel");return n.serverChannel},this.ready=function(){return n.promise},this.hasChannel=function(){return!!n.channel},this.hasServerChannel=function(){return!!n.serverChannel},this.setChannel=function(e){n.channel=e,n.resolve()},this.setServerChannel=function(e){n.serverChannel=e},this.getElements=function(e){return n.elements[e]||(n.elements[e]={}),n.elements[e]},this.addPanel=function(e,t){n.add(e,Object.assign({type:g.PANEL},t))},this.add=function(e,t){var a=t.type,s=n.getElements(a);s[e]=Object.assign({id:e},t)},this.setConfig=function(e){Object.assign(n.config,e)},this.getConfig=function(){return n.config},this.register=function(e,t){n.loaders[e]&&T.warn("".concat(e," was loaded twice, this could have bad side-effects")),n.loaders[e]=t},this.loadAddons=function(e){Object.values(n.loaders).forEach(function(t){return t(e)})},this.promise=new Promise(function(e){n.resolve=function(){return e(n.getChannel())}})},"AddonStore")),p="__STORYBOOK_ADDONS";function K(){return v[p]||(v[p]=new Y),v[p]}i(K,"getAddonsStore");var E=K(),z=i(function(n){var e=n.name,t=n.parameterName,a=n.wrapper,s=n.skipIfNoParametersOrOptions,o=s===void 0?!1:s,u=i(function(l){return function(f,h){var d=h.parameters&&h.parameters[t];return d&&d.disable||o&&!l&&!d?f(h):a(f,h,{options:l,parameters:d})}},"decorator");return function(){for(var c=arguments.length,l=new Array(c),f=0;f<c;f++)l[f]=arguments[f];return typeof l[0]=="function"?u().apply(void 0,l):function(){if(arguments.length>1)return l.length>1?u(l).apply(void 0,arguments):u.apply(void 0,l).apply(void 0,arguments);throw new Error("Passing stories directly into ".concat(e,`() is not allowed,
        instead use addDecorator(`).concat(e,") and pass options with the '").concat(t,"' parameter"))}}},"makeDecorator"),B="links",b=v.document,q=v.HTMLElement,G=i(function(n){return E.getChannel().emit(S,n)},"navigate"),k=i(function(n){var e=n.target;if(e instanceof q){var t=e,a=t.dataset,s=a.sbKind,o=a.sbStory;(s||o)&&(n.preventDefault(),G({kind:s,story:o}))}},"linksListener"),m=!1,V=i(function(){m||(m=!0,b.addEventListener("click",k))},"on"),W=i(function(){m&&(m=!1,b.removeEventListener("click",k))},"off"),X=z({name:"withLinks",parameterName:B,wrapper:i(function(n,e){return V(),E.getChannel().once(P,W),n(e)},"wrapper")});module&&module.hot&&module.hot.decline&&module.hot.decline();var U=[X];export{U as decorators};
//# sourceMappingURL=preview.83c373fc.js.map
